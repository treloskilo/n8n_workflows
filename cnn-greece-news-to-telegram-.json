{
  "updatedAt": "2025-12-16T15:54:10.000Z",
  "createdAt": "2025-12-16T15:52:39.267Z",
  "id": "9n31jfrtNszZTOdU",
  "name": "CNN Greece News to Telegram",
  "active": false,
  "isArchived": true,
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "5 9 * * *"
            }
          ]
        }
      },
      "id": "b326af7b-9042-42a5-bd00-56f5df2862e8",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        0
      ]
    },
    {
      "parameters": {
        "url": "https://www.cnn.gr/eidhseis",
        "options": {}
      },
      "id": "c1c3df74-60b4-419b-ba6a-dc419f725930",
      "name": "Fetch CNN Greece",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        208,
        0
      ]
    },
    {
      "parameters": {
        "jsCode": "const cheerio = require('cheerio');\nconst html = $input.item.json.data;\nconst $ = cheerio.load(html);\n\nconst articles = [];\n\n// CNN Greece uses article elements with class 'story'\n$('article.story, div.story, a.story').each((i, elem) => {\n  const $article = $(elem);\n  \n  // Try multiple selectors for title\n  let title = $article.find('h3').first().text().trim() || \n              $article.find('h2').first().text().trim() || \n              $article.find('.story__title').text().trim() ||\n              $article.find('[class*=\"title\"]').first().text().trim();\n  \n  // Try multiple selectors for URL\n  let url = $article.find('a').first().attr('href') || \n            $article.attr('href') ||\n            $article.find('[class*=\"link\"]').attr('href');\n  \n  // Fix relative URLs\n  if (url && !url.startsWith('http')) {\n    url = url.startsWith('/') ? 'https://www.cnn.gr' + url : 'https://www.cnn.gr/' + url;\n  }\n  \n  // Try multiple selectors for date/time\n  let datetime = $article.find('time').attr('datetime') ||\n                 $article.find('time').text().trim() ||\n                 $article.find('.story__time').text().trim() ||\n                 $article.find('[class*=\"date\"], [class*=\"time\"]').first().text().trim();\n  \n  // Only add if we have at least title and URL\n  if (title && url && title.length > 10) {\n    articles.push({\n      title: title,\n      url: url,\n      datetime: datetime || 'Not available',\n      source: 'CNN Greece'\n    });\n  }\n});\n\n// Limit to top 10 news items\nconst topArticles = articles.slice(0, 10);\n\nreturn topArticles.map(article => ({ json: article }));"
      },
      "id": "1324309d-b3e7-4668-9bb6-465d32e55e7b",
      "name": "Extract News Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        400,
        0
      ]
    },
    {
      "parameters": {
        "jsCode": "const articles = $input.all();\n\nif (articles.length === 0) {\n  return [{ json: { \n    message: 'üì∞ *CNN Greece News - Daily Update*\\n\\n‚ùå No articles found today.\\n\\nPlease check the website manually: https://www.cnn.gr/eidhseis'\n  }}];\n}\n\nlet message = 'üì∞ *CNN Greece News - Daily Update*\\n';\nmessage += `üìÖ ${new Date().toLocaleDateString('el-GR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\\n\\n`;\n\narticles.forEach((item, index) => {\n  const article = item.json;\n  message += `*${index + 1}. ${article.title}*\\n`;\n  message += `üîó ${article.url}\\n`;\n  if (article.datetime !== 'Not available') {\n    message += `üïê ${article.datetime}\\n`;\n  }\n  message += '\\n';\n});\n\nmessage += '\\n_Powered by n8n automation_';\n\nreturn [{ json: { message } }];"
      },
      "id": "50f651b0-adac-4926-84a2-5251e8abe879",
      "name": "Format Telegram Message",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        608,
        0
      ]
    },
    {
      "parameters": {
        "chatId": "YOUR_CHAT_ID",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "disable_web_page_preview": true,
          "parse_mode": "Markdown"
        }
      },
      "id": "5b2b4166-1deb-4814-a801-35812307ae31",
      "name": "Send to Telegram",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        800,
        0
      ],
      "webhookId": "290480d6-9bc6-42f3-9e77-1a96e57f8c54"
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Fetch CNN Greece",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch CNN Greece": {
      "main": [
        [
          {
            "node": "Extract News Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract News Data": {
      "main": [
        [
          {
            "node": "Format Telegram Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Telegram Message": {
      "main": [
        [
          {
            "node": "Send to Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "6f425d15-c20c-4628-9a45-cfc3326966e4",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-12-16T15:52:39.271Z",
      "createdAt": "2025-12-16T15:52:39.271Z",
      "role": "workflow:owner",
      "workflowId": "9n31jfrtNszZTOdU",
      "projectId": "7jNXHgiAtPda1pR0"
    }
  ],
  "activeVersion": null,
  "tags": []
}